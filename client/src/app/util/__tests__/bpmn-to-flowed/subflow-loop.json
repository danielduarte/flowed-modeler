{
  "tasks":{
    "subflow":{
      "requires":["productIds"],
      "provides":["products"],
      "resolver":{
        "name":"flowed::Loop",
        "params":{
          "inCollection":"productIds",
          "inItemName":{"value":"prodId"},
          "outItemName":{"value":"innerResults"},
          "subtask":{
            "value":{
              "requires":["prodId"],
              "provides":["product"],
              "resolver":{
                "name":"flowed::SubFlow",
                "params":{
                  "flowSpec":{
                    "value":{
                      "tasks":{
                        "getProdInfo":{
                          "requires":["prodId"],
                          "provides":["prodInfo"],
                          "resolver":{
                            "name":"flowed::OpenApi",
                            "params":{
                              "pathParams":{"transform":{"id":"{{prodId}}"}},
                              "path":"/products/{id}",
                              "method":"get",
                              "serverUrl":"http://localhost:3003"
                            },
                            "results":{"body":"prodInfo"}
                          }
                        },
                        "getProdPrice":{
                          "requires":["prodId"],
                          "provides":["prodPrice"],
                          "resolver":{
                            "name":"flowed::OpenApi",
                            "params":{
                              "pathParams":{"transform":{"id":"{{prodId}}"}},
                              "path":"/prices/{id}",
                              "method":"get",
                              "serverUrl":"http://localhost:3003"
                            },
                            "results":{"body":"prodPrice"}
                          }
                        },
                        "merge":{
                          "requires":["prodInfo","prodPrice"],
                          "provides":["product"],
                          "resolver":{
                            "name":"flowed::Echo",
                            "params":{
                              "in":{
                                "transform":"{{ Object.assign({}, prodInfo, prodPrice) }}"
                              }
                            },
                            "results":{"out":"product"}
                          }
                        }
                      }
                    }
                  },
                  "flowParams":{"transform":{"prodId":"{{prodId}}"}},
                  "flowExpectedResults":{"value":["product"]},
                  "uniqueResult":{"value":"product"}
                },
                "results":{"flowResult":"innerResults"}
              }
            }
          }
        },
        "results":{"outCollection":"products"}
      }
    }
  }
}
